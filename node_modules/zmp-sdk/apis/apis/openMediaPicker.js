import e from'./../external/@swc/helpers/src/_async_to_generator.mjs.js';import o,{object as t,string as i,number as r,boolean as n}from'./../external/zod/lib/index.mjs.js';import a from"../appEnv/index.js";import s from"../common/notFound.js";import{functionHandler as l}from"../utils/decorator.js";import m from"../utils/lodash.js";import p from"../common/apis/general/openMediaPicker.js";import{__generator as d}from'./../external/tslib/tslib.es6.js';var c=[t({type:o.enum(["video","photo","file","zcamera","zcamera_photo","zcamera_video","zcamera_scan"]),serverUploadUrl:i().url(),maxItemSize:r().min(0).optional(),editView:t({enable:n().optional(),aspectRatio:i().regex(/^\d+:\d+$/).optional()}).optional(),silentRequest:n().optional(),maxSelectItem:r().min(1).optional()})];function u(e){return f.apply(this,arguments)}function f(){return f=e((function(o){return d(this,(function(t){return[2,l("openMediaPicker",c,[o],(i=e((function(e){var o,t,i,r,n,l;return d(this,(function(d){switch(d.label){case 0:return a.isMp?(r={},m.isUndefined(null===(o=e.editView)||void 0===o?void 0:o.enable)||(null===(t=e.editView)||void 0===t?void 0:t.enable)?r.enable=1:r.enable=0,r.aspect_ratio=null===(i=e.editView)||void 0===i?void 0:i.aspectRatio,n=!0===e.silentRequest?1:0,l=e.maxSelectItem,[4,p(e.type,e.serverUploadUrl,e.maxItemSize,r,n,l)]):[3,2];case 1:return[2,{data:d.sent()}];case 2:return a.isMpWeb?[2,Promise.resolve({data:""})]:[2,Promise.reject(s("openMediaPicker",{}))]}}))})),function(e){return i.apply(this,arguments)}))];var i}))})),f.apply(this,arguments)}export{u as openMediaPicker};
