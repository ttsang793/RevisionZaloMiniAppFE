import e from'./../external/@swc/helpers/src/_async_to_generator.mjs.js';import t,{object as n,number as o}from'./../external/zod/lib/index.mjs.js';import{functionHandler as a}from"../utils/decorator.js";import{__generator as r}from'./../external/tslib/tslib.es6.js';var i=[n({count:o().min(1).optional().default(1),sourceType:t.array(t.enum(["album","camera"])).max(2).default(["album","camera"]).optional(),cameraType:t.enum(["back","front"]).default("front").optional()})];function c(e){return u.apply(this,arguments)}function u(){return u=e((function(t){return r(this,(function(n){return[2,a("chooseImage",i,[t],(o=e((function(e){var t,n,o,a;return r(this,(function(r){return t=e.sourceType||["album","camera"],n=e.cameraType||"front",o=e.count||1,(a=document.createElement("input")).type="file",a.multiple=o>1,a.accept="image/*",a.style.display="none",1===t.length&&t.includes("camera")&&(a.accept="front"===n?"zcamera/photo-frontfacing":"zcamera/photo-backfacing",a.capture="front"===n?"user":"environment"),[2,new Promise((function(e,t){a.addEventListener("change",(function(n){var a,r=(null==n||null===(a=n.target)||void 0===a?void 0:a.files)||[];if(r.length>o)t(new Error("You are only allowed to choose a maximum of ".concat(o," images at a time")));else{var i={filePaths:[],tempFiles:[]};Array.from(r).forEach((function(e){i.filePaths.push(URL.createObjectURL(e)),i.tempFiles.push({path:URL.createObjectURL(e),size:e.size})})),e(i)}})),document.body.appendChild(a),a.click()}))]}))})),function(e){return o.apply(this,arguments)}))];var o}))})),u.apply(this,arguments)}export{c as chooseImage};
