import r from'./../external/@swc/helpers/src/_async_to_generator.mjs.js';import e from"../utils/query-string.js";import{APIS as o}from"../constants.js";import t from"../utils/lodash.js";import n from"../utils/request.js";import a from"../appEnv/getEnv.js";import{__generator as i}from'./../external/tslib/tslib.es6.js';var s,d=(s=r((function(r,n,a){var s,d,u,c;return i(this,(function(i){switch(i.label){case 0:return s={appId:r,versionStatus:n},t.isUndefined(a)||(s.currentVersion=a),d=e.appendToUrl(o.GET_APP_INFO,s),[4,fetch(d,{credentials:"include"})];case 1:return(u=i.sent()).ok?[4,u.json()]:[3,3];case 2:if((c=i.sent()).err<0||!c.data)throw new Error(c);return[2,{name:c.data.name,version:c.data.version,description:c.data.description,appUrl:c.data.appUrl,qrCodeUrl:c.data.qrCodeUrl,logoUrl:c.data.logoUrl,cateID:c.data.cateType}];case 3:throw new Error("Can't get app info")}}))})),function(r,e,o){return s.apply(this,arguments)});function u(r){try{var e=r.map((function(r){return{action:r.action,error:r.error,message:r.message,data:r.data}}));n.execute(o.SEND_ACTION_LOG,"post",{appId:window.APP_ID,data:JSON.stringify(e)},(function(){}))}catch(r){}}var c=function(r){return r.replace(/[A-Z]/g,(function(r){return"_".concat(r.toLowerCase())}))},l=function(){var r;return"android"===((null===(r=a())||void 0===r?void 0:r.platformName)||"").toLowerCase()},p=function(){var r;return"ios"===((null===(r=a())||void 0===r?void 0:r.platformName)||"").toLowerCase()};var f=function(){var r=0;if(window.zaloVersionCode)r=window.zaloVersionCode;else{var e,o=Number((null===(e=a())||void 0===e?void 0:e.zaloVersion)||"0");if(o>=24112e3)r=o;else{var t,n=((null===(t=a())||void 0===t?void 0:t.platformName)||"").toLowerCase();"android"===n?r=o%1e4:"ios"===n&&(r=o)}}return function(r){var e=String(r);try{if(/^\d{9}$/.test(e)&&"0"===e[5])return Number(e.slice(0,5)+e.slice(6))}catch(r){}return Number(e)}(r)},m=function(r,e){var o=f();return l()&&o<r||p()&&o<e};export{c as camelToSnakeCase,d as getAppInfo,f as getZaloVersionCode,m as isAPINotSupport,l as isAndroid,p as isIOS,u as sendLogData};
