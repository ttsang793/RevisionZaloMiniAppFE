import r from'./../external/@swc/helpers/src/_async_to_generator.mjs.js';import t from"../utils/query-string.js";import{APIS as o}from"../constants.js";import e from"../utils/lodash.js";import n from"../utils/request.js";import a from"../appEnv/getEnv.js";import{__generator as i}from'./../external/tslib/tslib.es6.js';var s,u=(s=r((function(r,n,a){var s,u,d,c;return i(this,(function(i){switch(i.label){case 0:return s={appId:r,versionStatus:n},e.isUndefined(a)||(s.currentVersion=a),u=t.appendToUrl(o.GET_APP_INFO,s),[4,fetch(u,{credentials:"include"})];case 1:return(d=i.sent()).ok?[4,d.json()]:[3,3];case 2:if((c=i.sent()).err<0||!c.data)throw new Error(c);return[2,{name:c.data.name,version:c.data.version,description:c.data.description,appUrl:c.data.appUrl,qrCodeUrl:c.data.qrCodeUrl,logoUrl:c.data.logoUrl,cateID:c.data.cateType}];case 3:throw new Error("Can't get app info")}}))})),function(r,t,o){return s.apply(this,arguments)});function d(r){try{var t=r.map((function(r){return{action:r.action,error:r.error,message:r.message,data:r.data}}));n.execute(o.SEND_ACTION_LOG,"post",{appId:window.APP_ID,data:JSON.stringify(t)},(function(){}))}catch(r){}}var c=function(r){return r.replace(/[A-Z]/g,(function(r){return"_".concat(r.toLowerCase())}))},p=function(){var r;return"android"===((null===(r=a())||void 0===r?void 0:r.platformName)||"").toLowerCase()},l=function(){var r;return"ios"===((null===(r=a())||void 0===r?void 0:r.platformName)||"").toLowerCase()};function f(r){var t=String(r);try{if(/^\d{9}$/.test(t)&&"0"===t[5])return Number(t.slice(0,5)+t.slice(6))}catch(r){}return Number(t)}var m=function(){var r,t=0;if(window.zaloVersionCode)return f(window.zaloVersionCode);var o=Number((null===(r=a())||void 0===r?void 0:r.zaloVersion)||"0");return o>=24112e3?t=o:p()?t=o%1e4:l()&&(t=o),f(t)};function v(r,t){if(window.isAPISupport&&"function"==typeof window.isAPISupport)return window.isAPISupport(r,t);var o=m();return p()?o>=r:!!l()&&o>=t}export{c as camelToSnakeCase,u as getAppInfo,m as getZaloVersionCode,v as isAPISupport,p as isAndroid,l as isIOS,d as sendLogData};
