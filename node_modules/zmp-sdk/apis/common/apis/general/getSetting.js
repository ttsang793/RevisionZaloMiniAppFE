import e from'./../../../external/@swc/helpers/src/_async_to_generator.mjs.js';import t from'./../../../external/@swc/helpers/src/_object_spread.mjs.js';import{RESPONSE_CODE as r,MESSAGES as n,APIS as s}from"../../../constants.js";import o from"../../token.js";import{AppError as i}from"../../../utils/errorHandler.js";import{__generator as a}from'./../../../external/tslib/tslib.es6.js';var u,c=(u=e((function(e){var r;return a(this,(function(n){switch(n.label){case 0:return r={headers:{"Content-Type":"application/x-www-form-urlencoded",authorization:"Bearer ".concat(e)}},[4,fetch(s.GET_AUTH_SETTING,t({method:"GET"},r))];case 1:return[4,n.sent().json()];case 2:return[2,n.sent()]}}))})),function(e){return u.apply(this,arguments)}),m=e((function(){return a(this,(function(t){return[2,new Promise((s=e((function(e,t){var s,u,m,l;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,o.jumpAndGetToken()];case 1:return a.sent(),(u=null===(s=o.miniProgramConfig)||void 0===s?void 0:s.jwt)||t(new i(r.UNAUTHORIZED,n.LOGIN_REQUIRED,"getSetting")),[4,c(u)];case 2:return(m=a.sent())&&0===m.err?e({authSetting:m.data}):t(new i(m.err,m.msg,"getSetting")),[3,4];case 3:return l=a.sent(),t(l),[3,4];case 4:return[2]}}))})),function(e,t){return s.apply(this,arguments)}))];var s}))}));export{m as default,c as getAuthenSettings};
