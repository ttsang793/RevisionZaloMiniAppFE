import r from'./../../../external/@swc/helpers/src/_async_to_generator.mjs.js';import e from'./../../../external/@swc/helpers/src/_sliced_to_array.mjs.js';import t from"../../call/index.js";import{MINI_APP_INTERNAL_LINK as s}from"../../../constants.js";import n from"./getAppInfo.js";import{__generator as o}from'./../../../external/tslib/tslib.es6.js';var a,c=(a=r((function(r){var a,c,i,p,l,m,f=arguments;return o(this,(function(o){switch(o.label){case 0:a=f.length>1&&void 0!==f[1]?f[1]:"/",c=f.length>2&&void 0!==f[2]?f[2]:{},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n(r,0)];case 2:return i=o.sent(),[3,4];case 3:return o.sent(),[3,4];case 4:p={appId:r},i&&(p.appName=i.name,p.appAvtUrl=i.logoUrl),l="".concat(s,"/").concat(r).concat(a);try{m=new URL(l),Object.entries(c).forEach((function(r){var t=e(r,2),s=t[0],n=t[1];m.searchParams.append(s,String(n))})),l=m.href}catch(r){}return[2,new Promise((function(r,e){t("OPEN_MP",{mpUrl:l,mpInfo:p},{success:function(){r()},fail:function(r){e(r)}},{})}))]}}))})),function(r){return a.apply(this,arguments)});export{c as default};
