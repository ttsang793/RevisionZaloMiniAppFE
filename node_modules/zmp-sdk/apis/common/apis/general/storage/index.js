import t from'./../../../../external/@swc/helpers/src/_assert_this_initialized.mjs.js';import e from'./../../../../external/@swc/helpers/src/_async_to_generator.mjs.js';import r from'./../../../../external/@swc/helpers/src/_class_call_check.mjs.js';import n from'./../../../../external/@swc/helpers/src/_class_private_field_get.mjs.js';import s from'./../../../../external/@swc/helpers/src/_class_private_field_init.mjs.js';import o from'./../../../../external/@swc/helpers/src/_class_private_field_set.mjs.js';import i from'./../../../../external/@swc/helpers/src/_inherits.mjs.js';import c from'./../../../../external/@swc/helpers/src/_sliced_to_array.mjs.js';import a from'./../../../../external/@swc/helpers/src/_create_super.mjs.js';import u from"../../../../utils/lodash.js";import{LocalResourceStorage as m}from"./localStorage.js";import{NativeResourceStorage as l}from"./nativeStorage.js";import{stringToData as f,stringifyData as p}from"../../../../utils/common.js";import{APP_ID as h,ZALO_SUPPORT_STORAGE_VERSION as _}from"../../../../constants.js";import{getZaloVersionCode as d}from"../../../utils.js";import v from"../../../../appEnv/getEnv.js";import{__generator as g}from'./../../../../external/tslib/tslib.es6.js';var j,w,I=function(){function t(){r(this,t)}var n=t.prototype;return n.getDataFromStorage=function(t){var r=this;return e((function(){var e,n;return g(this,(function(s){switch(s.label){case 0:return[4,r.getInstance().get(t)];case 1:return e=s.sent(),n={},e.forEach((function(t,e){n[e]=f(t)})),[2,n]}}))}))()},n.getItem=function(t){return this.getInstance().getItem(t)},n.putDataToStorage=function(t){var r=this;return e((function(){var e,n;return g(this,(function(s){switch(s.label){case 0:return e=r.getInstance(),n={},Object.entries(t).forEach((function(t){var e=c(t,2),r=e[0],s=e[1];u.isUndefined(s)||u.isNull(s)||(n[r]=p(s))})),[4,e.set(n)];case 1:return[2,s.sent()]}}))}))()},n.setItem=function(t,e){return this.getInstance().setItem(t,e)},n.removeDataFromStorage=function(t){var r=this;return e((function(){return g(this,(function(e){switch(e.label){case 0:return[4,r.getInstance().remove(t)];case 1:return[2,e.sent()]}}))}))()},n.removeItem=function(t){this.getInstance().removeItem(t)},n.clearStorage=function(){var t=this;return e((function(){return g(this,(function(e){switch(e.label){case 0:return[4,t.getInstance().clearAsync()];case 1:return e.sent(),[2]}}))}))()},n.clearStorageSync=function(){this.getInstance().clear()},n.getStorageInfo=function(){var t=this;return e((function(){return g(this,(function(e){switch(e.label){case 0:return[4,t.getInstance().getInfo()];case 1:return[2,e.sent()]}}))}))()},n.getStorageInfoSync=function(){return this.getInstance().getStorageInfo()},t}(),S=new WeakMap,b=function(e){i(u,e);var c=a(u);function u(e){var n;return r(this,u),n=c.call(this),s(t(n),S,{writable:!0,value:void 0}),o(t(n),S,e),n}return u.prototype.getInstance=function(){return new m(n(this,S))},u}(I),y=new WeakMap,E=function(e){i(u,e);var c=a(u);function u(e){var n;return r(this,u),n=c.call(this),s(t(n),y,{writable:!0,value:void 0}),o(t(n),y,e),n}return u.prototype.getInstance=function(){return new l(n(this,y))},u}(I),k=new b(h),D=d(),M=(null===(j=v())||void 0===j?void 0:j.platformName)||"unknown";D>0&&D>=_[M]&&(null===(w=v())||void 0===w?void 0:w.appEnv.isMp)&&(k=new E(h));var F=k;export{I as StorageCreator,F as default};
