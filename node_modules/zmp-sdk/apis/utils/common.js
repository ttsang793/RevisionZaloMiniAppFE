import n from'./../external/@swc/helpers/src/_async_to_generator.mjs.js';import r from'./../external/@swc/helpers/src/_sliced_to_array.mjs.js';import t from'./../external/@swc/helpers/src/_type_of.mjs.js';import{ALLOW_WIDGET_ORIGIN as e,ACTION as o}from"../constants.js";import i from"./debug.js";import a from"./lodash.js";import{StatusBarType as c}from"../types/enum.js";import u from"../common/token.js";import{getZaloVersionCode as s}from"../common/utils.js";import{__generator as f}from'./../external/tslib/tslib.es6.js';var p=i("zmp:utils:common"),l=function(n){if(a.isObject(JSON)&&JSON.stringify)return JSON.stringify(n);if(void 0===n)return"undefined";if(null===n)return"null";try{if("string"==typeof n||null!==n.constructor.toString().match(/string/i))return'"'+n.replace(/"/g,'\\"')+'"'}catch(n){console.log(n)}var r;if(null!==Object.prototype.toString.call(n).match(/array/i)){r=[];for(var t=n.length,e=0;e<t;e++)r.push(l(n[e]));return"["+r.join(",")+"]"}if("object"==typeof n){for(var o in r=[],n)r.push('"'+o+'":'+l(n[o]));return"{"+r.join(",")+"}"}return n.toString()},m=function(n){var r=o[n],t=s(),e=r&&"object"==typeof r&&"versionLive"in r&&r.versionLive&&"iOS"in r.versionLive?r.versionLive.iOS:0;return!!(Array.isArray(window.ignoreCheckSupport)&&window.ignoreCheckSupport.length>0&&window.ignoreCheckSupport.includes(n))||t>=e},d=function(n){try{if(n){p(n);var r=n.replace(/\\/g,"").replace(/&#39;/g,"'");try{r=decodeURIComponent(atob(n))}catch(n){}var e=JSON.parse(r);return p("formattedValue",r,e,void 0===e?"undefined":t(e)),e}return null}catch(r){return p("parse json error:",r),n}},g=function(n){if(a.isObject(JSON)&&JSON.parse&&a.isString(n)){var r=n.replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\x00/g,"");return JSON.parse(r,(function(n,r){return r}))}return a.isObject(n)?n:new Function("return "+n)()},h=function(n){for(var r=document.getElementsByTagName("meta"),t=0;t<r.length;t++)if(r[t].getAttribute("name")===n||r[t].getAttribute("property")===n)return r[t].getAttribute("content");return""},v=function(n){return btoa(encodeURIComponent(JSON.stringify(n)))},y=function(n,r){var t,e=0;for(t in n){var o=t.split("_")[0];n.hasOwnProperty(t)&&(r&&o!==r||(e+=2*(n[t].length+t.length)))}return e};function j(n){return n.map((function(n,r){var t=n.path.length>0?n.path.map((function(n,r){return r>0?"[".concat(n,"]"):n})).join(""):"arg";return"Error ".concat(r+1,": Code: ").concat(n.code," ~ Path: ").concat(t," ~ Message: ").concat(n.message)})).join(" | ")}var S,b=function(n){return n===c.hidden?"hidden":n===c.transparent?"transparent":"normal"},O=function(n){return"hidden"===n?c.hidden:"transparent"===n?c.transparent:c.normal},w=function(n){if(void 0!==n){var r=u.miniProgramConfig;return((null==r?void 0:r.dynamicApis)||[]).find((function(r){return r.action===n&&!1===r.clientHandle}))}},_=function(n){if(void 0===n)return!1;var r=u.miniProgramConfig;return((null==r?void 0:r.requiredAuthenList)||[]).indexOf(n)>=0},C=(S=n((function(){return f(this,(function(r){return[2,new Promise(function(){var r=n((function(n,r){var t;return f(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,u.jumpAndGetToken()];case 1:return r.sent(),t=u.miniProgramConfig,n(!0===(null==t?void 0:t.canUseAccessTokenByDefault)),[3,3];case 2:return r.sent(),n(!1),[3,3];case 3:return[2]}}))}));return function(n,t){return r.apply(this,arguments)}}())]}))})),function(){return S.apply(this,arguments)}),A=function(n){return n.replace("action.","").replace(/\./g,"_").toUpperCase()},N=function(n){return n.startsWith("action.")?n:"action.".concat(n.replace(/\_/g,".").toLowerCase())},J=function(n,t,e){"string"==typeof e&&e.length>0?n.set(t,e):"object"!=typeof e||Array.isArray(e)||Object.entries(e).forEach((function(e){var o=r(e,2),i=o[0],a=o[1];null!=a&&""!==a&&n.set("".concat(t).concat(i),String(a))}))},k=function(n,r,t){var o;null===(o=n.contentWindow)||void 0===o||o.postMessage({type:r,payload:t},e)};function L(n){var r=(new TextEncoder).encode(n),t=Array.from(r).map((function(n){return String.fromCharCode(n)})).join("");return btoa(t)}export{L as base64EncodeUnicode,y as calcLocalStorageSize,C as canUseAccessTokenByDefault,m as checkIOSSupportAction,A as convertJumpActionToSDKAction,N as convertSDKActionToJumpAction,O as convertStatusBarTypeToNumber,j as generateErrorMessage,w as getDynamicAPIByAction,h as getMetaValue,b as getStatusbarType,_ as isRequireUserAuthentication,g as parseJSON,k as postMessageToWidget,l as serialize,J as setSearchParams,d as stringToData,v as stringifyData};
